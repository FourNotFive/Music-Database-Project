# Music Database Project â€” Progress Update (2025-08-19)

## Major Breakthrough: Real Chord Extraction! ðŸŽ‰

### Environment Setup (Windows PC)
- Switched from Mac to Windows laptop
- **Python 3.13.6** (no virtual environment needed on Windows)
- All packages installed: pandas, numpy, Flask, etc.
- Project location: `C:\Users\Arjan\Desktop\Music_Project`

### Current Database Status
- **SQLite database:** `music_database.db` (13MB)
- **Total tables:** 4 main tables

#### Database Tables:
1. **`mcgill_chord_data`** â€” **5,076 songs** âœ…
   - Artist, song title, year, file paths
   - **NEW:** Real chord progressions (partially updated)
   
2. **`cocopops_chord_data`** â€” 50 songs 
   - Recent parsing experiments
   
3. **`billboard_hot100`** â€” 5,100 chart songs
   - Billboard chart data with lyrics
   
4. **`unique_songs`** â€” 4,899 unique Billboard songs
   - Chart positions and weeks on chart

### Dataset Analysis
- **CoCoPops-Billboard-legacy dataset:** ~9,078 files
- **File types discovered:**
  - `.lab` files: 5,340 (chord timing data)
  - `.hum` files: 1,692 (detailed musical transcriptions)
  - `.txt` files: 892 (metadata files)
  - `.krn` files: 214 (Kern format)
  - Other formats: `.mid`, `.musicxml`, `.pdf`, etc.

### Chord Extraction Breakthrough âœ…

#### Problem Solved:
- **Before:** Database showed "Available in McGill dataset" 
- **After:** Real chord progressions extracted!

#### Example Success:
**ABBA - Chiquitita (1979):**
```
A:maj - D:maj - A:maj - D:maj - A:maj - D:maj - A:maj - E:maj - D:maj/3 - E:maj - E:7/3 - A:maj - D:maj - A:maj - D:maj - A:maj - D:maj - A:maj - C#:min - C#:min(9)
```

#### Technical Details:
- **Source:** `.hum` files (Humdrum format)
- **Chord location:** Column 8 (`**harte` column)
- **Extraction method:** Parse tab-separated values, filter metadata
- **Processing:** Remove dots (.), skip N.C. (No Chord), deduplicate sequential repeats

### Code Improvements

#### New Scripts Created:
1. **`check_chord_data.py`** â€” Inspect current database chord content
2. **`peek_real_chords.py`** â€” Examine raw file content vs. database storage
3. **`extract_one_song.py`** â€” Test chord extraction from individual files
4. **`fix_one_song_chords.py`** â€” Update database with real chord progressions

#### Chord Processing Logic:
```python
# Extract from column 8 of .hum files
chord = parts[7].strip()  # Column 8 = index 7

# Clean progression (remove dots and N.C.)
if chord == '.':
    continue  # Continue previous chord
elif chord == 'N.C.':
    continue  # Skip "No Chord"
else:
    clean_chords.append(chord)
```

### Current Status

#### âœ… Completed:
- Environment migration (Mac â†’ Windows PC)
- Database structure analysis
- File format identification  
- Chord extraction algorithm development
- **Proof of concept:** Successfully extracted real chords from one song

#### ðŸ”„ In Progress:
- **Next step:** Apply chord extraction to all 5,076 songs

#### ðŸ“‹ To Do:
1. **Bulk chord processing** â€” Update all songs with real chord progressions
2. **Billboard linking** â€” Match chord data to Billboard chart songs
3. **Flask app enhancement** â€” Build search/display interface for chord progressions
4. **Fuzzy matching** â€” Handle artist/title variations between datasets

### Files in Project Directory

```
Music_Project/
â”œâ”€â”€ CoCoPops-Billboard-legacy/     # Source dataset (9,078 files)
â”œâ”€â”€ Templates/                     # Processing scripts
â”œâ”€â”€ Claude Markdown summaries/     # Documentation
â”œâ”€â”€ McGill_data/                   # Additional chord data
â”œâ”€â”€ music_database.db             # Main SQLite database (13MB)
â”œâ”€â”€ hot-100-current.csv           # Billboard current charts
â”œâ”€â”€ hot100_archive_1958_2021.xlsx # Historical Billboard data
â”œâ”€â”€ app.py                        # Flask web application
â””â”€â”€ [Various processing scripts]
```

### Key Discovery: File Structure

#### `.hum` File Format (Humdrum):
```
**kern    **silbe **harmony    **phrase    **leadinstrument    **rhyme **timestamp    **harte
*ICvox    *       *M4/4       *           *                   *       *             *M4/4
1r        .       2AM         newline     piano               .       11.076        A:maj
.         .       2DM         .           piano               .       12.504        D:maj
```

**Column 8 (`**harte`)** contains the chord progressions we need!

### Next Session Goals
1. **Bulk update** all 5,076 songs with real chord progressions
2. **Database optimization** and indexing
3. **Flask app development** for chord search and display
4. **GitHub sync** and version control setup

---

**Progress Level:** ðŸŸ¢ **Major breakthrough achieved!** 
**Confidence:** High â€” chord extraction working perfectly
**Next Priority:** Scale to full dataset